{"ast":null,"code":"var _jsxFileName = \"/Users/KevinEleven/git/movie-picker/frontend/src/components/add-review.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport MovieDataService from \"../services/movie\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddReview = props => {\n  _s();\n\n  let initialReviewState = \"\";\n  let editing = false;\n\n  if (props.location.state && props.location.state.currentReview) {\n    editing = true;\n    initialReviewState = props.location.state.currentReview.text;\n  }\n\n  const [review, setReview] = useState(initialReviewState);\n  const [submitted, setSubmitted] = useState(false);\n\n  const handleInputChange = event => {\n    setReview(event.target.value);\n  };\n\n  const saveReview = () => {\n    if (review >= 0 && review <= 5) {\n      var data = {\n        name: props.user.name,\n        user_id: props.user.id,\n        movie_id: props.match.params.id,\n        star: review\n      };\n\n      if (editing) {\n        data.review_id = props.location.state.currentReview._id;\n        MovieDataService.updateReview(data).then(response => {\n          setSubmitted(true);\n          console.log(response.data);\n        }).catch(e => {\n          console.log(e);\n        });\n      } else {\n        MovieDataService.createReview(data).then(response => {\n          setSubmitted(true);\n          console.log(response.data);\n        }).catch(e => {\n          console.log(e);\n        });\n      }\n    } else {\n      alert(\"Review must be from 0 to 5\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: props.user ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"submit-form\",\n      children: submitted ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"You submitted successfully!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/movies/\" + props.match.params.id,\n          className: \"btn btn-success\",\n          children: \"Back to Movie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"description\",\n            children: [editing ? \"Edit\" : \"Create\", \" Review\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"text\",\n            required: true,\n            value: review,\n            onChange: handleInputChange,\n            name: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveReview,\n          className: \"btn btn-success\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Please log in.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddReview, \"1N0V0vj7+qj1k8d/c6/UujbSpEM=\");\n\n_c = AddReview;\nexport default AddReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddReview\");","map":{"version":3,"sources":["/Users/KevinEleven/git/movie-picker/frontend/src/components/add-review.js"],"names":["React","useState","MovieDataService","Link","AddReview","props","initialReviewState","editing","location","state","currentReview","text","review","setReview","submitted","setSubmitted","handleInputChange","event","target","value","saveReview","data","name","user","user_id","id","movie_id","match","params","star","review_id","_id","updateReview","then","response","console","log","catch","e","createReview","alert"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport MovieDataService from \"../services/movie\";\nimport { Link } from \"react-router-dom\";\n\nconst AddReview = props => {\n    let initialReviewState = \"\"\n\n    let editing = false;\n\n    if (props.location.state && props.location.state.currentReview) {\n        editing = true;\n        initialReviewState = props.location.state.currentReview.text\n    }\n\n    const [review, setReview] = useState(initialReviewState);\n    const [submitted, setSubmitted] = useState(false);\n\n    const handleInputChange = event => {\n        setReview(event.target.value);\n    };\n\n    const saveReview = () => {\n        if (review >= 0 && review <= 5) {\n            var data = {\n                name: props.user.name,\n                user_id: props.user.id,\n                movie_id: props.match.params.id,\n                star: review\n\n            };\n\n            if (editing) {\n                data.review_id = props.location.state.currentReview._id\n                MovieDataService.updateReview(data)\n                    .then(response => {\n                        setSubmitted(true);\n                        console.log(response.data);\n                    })\n                    .catch(e => {\n                        console.log(e);\n                    });\n            } else {\n                MovieDataService.createReview(data)\n                    .then(response => {\n                        setSubmitted(true);\n                        console.log(response.data);\n                    })\n                    .catch(e => {\n                        console.log(e);\n                    });\n            }     \n        } else {\n            alert(\"Review must be from 0 to 5\")\n        }\n    };\n\n    return (\n        <div>\n            {props.user ? (\n                <div className=\"submit-form\">\n                    {submitted ? (\n                        <div>\n                            <h4>You submitted successfully!</h4>\n                            <Link to={\"/movies/\" + props.match.params.id} className=\"btn btn-success\">\n                                Back to Movie\n                            </Link>\n                        </div>\n                    ) : (\n                        <div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"description\">{editing ? \"Edit\" : \"Create\"} Review</label>\n                                <input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    id=\"text\"\n                                    required\n                                    value={review}\n                                    onChange={handleInputChange}\n                                    name=\"text\"\n                                />\n                            </div>\n                            <button onClick={saveReview} className=\"btn btn-success\">\n                                Submit\n                            </button>\n                        </div>\n                    )}\n                </div>\n\n            ) : (\n                <div>\n                    Please log in.\n                </div>\n            )}\n\n        </div>\n    );\n};\n\nexport default AddReview;"]},"metadata":{},"sourceType":"module"}